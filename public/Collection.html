<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOORÃ‰ | Collections</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<link rel="stylesheet" href="Collection.css">
<link rel="icon" href="assets/logo.ico" type="image/x-icon">
</head>
<body>

<!-- ===== HEADER (REUSED) ===== -->
<header>
    <a href="index.html" class="logo">NOORÃ‰</a>
    <nav>
        <a href="index.html">Home</a>
        <a href="#" onclick="toggleCart()">Cart</a>
        <a href="#" id="loginBtn" class="nav-link login-button" onclick="handleLoginClick()">Login</a>
        
        <!-- Browse Wrapper (Button + Menu) -->
        <div class="browse-wrapper">
            <a href="#" class="browse-btn" id="browseBtn" onclick="toggleBrowseMenu(event)">Browse â–¾</a>
            <div class="browse-menu" id="browseMenu">
                <!-- Close button for mobile -->
                <a href="#" class="browse-close" onclick="closeBrowseMenu()">âœ•</a>
                <a href="#bracelets" onclick="closeBrowseMenu()">Bracelets</a>
                <a href="#rings" onclick="closeBrowseMenu()">Rings</a>
                <a href="#armcuffs" onclick="closeBrowseMenu()">Arm Cuffs</a>
                <a href="#ear-accessories" onclick="closeBrowseMenu()">Ear Accessories</a>
                <a href="#pendents" onclick="closeBrowseMenu()">Pendants</a>
            </div>
        </div>
    </nav>
</header>

<!-- LOGIN MODAL -->
<div id="loginModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:10000; justify-content:center; align-items:center;">
    <div style="background:white; padding:30px; border-radius:15px; max-width:350px; width:90%;">
        <h3 style="color:var(--maroon); margin-bottom:20px; font-family:'Playfair Display', serif;">Welcome to NOORÃ‰</h3>
        <p style="font-size:14px; color:#666; margin-bottom:20px;">Enter your details to continue</p>
        
        <input type="text" id="userName" placeholder="Your Name" autocomplete="name" style="width:100%; padding:12px; margin-bottom:10px; border:1px solid #ddd; border-radius:8px; box-sizing:border-box;">
        <input type="email" id="userEmail" placeholder="Email Address" autocomplete="email" style="width:100%; padding:12px; margin-bottom:10px; border:1px solid #ddd; border-radius:8px; box-sizing:border-box;">
        <input type="tel" id="userPhone" placeholder="Phone Number" autocomplete="tel" style="width:100%; padding:12px; margin-bottom:20px; border:1px solid #ddd; border-radius:8px; box-sizing:border-box;">
        
        <button onclick="saveUserDetails()" style="width:100%; padding:12px; background:var(--maroon); color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px;">Continue</button>
        <button onclick="closeLoginModal()" style="width:100%; padding:10px; background:#ddd; color:#333; border:none; border-radius:8px; cursor:pointer; margin-top:10px;">Cancel</button>
    </div>
</div>
<!-- LOGOUT CONFIRMATION MODAL -->
<div id="logoutModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:10001; justify-content:center; align-items:center;">
    <div style="background:white; padding:30px; border-radius:15px; max-width:350px; width:90%; text-align:center;">
        <h3 style="color:var(--maroon); margin-bottom:15px; font-family:'Playfair Display', serif;">Logout</h3>
        <p style="color:#666; margin-bottom:25px;">Are you sure you want to logout?</p>
        <button onclick="confirmLogout()" style="width:100%; padding:12px; background:var(--maroon); color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px; margin-bottom:10px;">Yes, Logout</button>
        <button onclick="closeLogoutModal()" style="width:100%; padding:10px; background:#ddd; color:#333; border:none; border-radius:8px; cursor:pointer;">Cancel</button>
    </div>
</div>

<!-- TOAST NOTIFICATION -->
<div id="toast" style="display:none; position:fixed; bottom:30px; left:50%; transform:translateX(-50%); background:#333; color:white; padding:15px 30px; border-radius:10px; z-index:10002; font-size:14px; box-shadow:0 5px 20px rgba(0,0,0,0.3);">
</div>

<section class="products" id="products"> <!-- add this next ( hidden) to class products to hide it -->
    <h2>Our Best</h2>

    <div class="product-scroll-wrapper">
        <div class="scroll-track auto-scroll">

            <!-- ===== PRODUCT SET 1 ===== -->
            <div class="card">
                <img src="assets/products/nora-leigh.jfif" alt="Product Name" class="product-img">
                <h3>Nora Leigh</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/ivy-blink.jfif" alt="Product Name" class="product-img">
                <h3>Ivy Blink</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/vera-lynn.jfif" alt="Product Name" class="product-img">
                <h3>Vera Lynn</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/ring1.jfif" alt="Product Name" class="product-img">
                <h3>Sadie Lou</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/redeemer.jfif" alt="Product Name" class="product-img">
                <h3>Coming Soon...</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/bracelt.jfif" alt="Product Name" class="product-img">
                <h3>Coming Soon...</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>
            <!-- ===== PRODUCT SET 2 (DUPLICATE FOR LOOPING) ===== -->
            <div class="card">
                <img src="assets/products/nora-leigh.jfif" alt="Product Name" class="product-img">
                <h3>Nora Leigh</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/ivy-blink.jfif" alt="Product Name" class="product-img">
                <h3>Ivy Blink</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/vera-lynn.jfif" alt="Product Name" class="product-img">
                <h3>Vera Lynn</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/ring1.jfif" alt="Product Name" class="product-img">
                <h3>Sadie Lou</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/redeemer.jfif" alt="Product Name" class="product-img">
                <h3>Coming Soon...</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

            <div class="card">
                <img src="assets/products/bracelt.jfif" alt="Product Name" class="product-img">
                <h3>Coming Soon...</h3>
                <div class="price">â‚¹0</div>
                <button onclick="addToCart(this)">Add to Cart</button>
            </div>

        </div>
    </div>
</section>

<!-- ===== OUR OFFERINGS HEADER ===== -->
<section class="offerings-header">
    <h2>Our Offerings</h2>
</section>

<!-- ===== BRACELETS ===== -->
<section class="category-section" id="bracelets">
    <div class="category-banner" style="background-image: url('assets/Background.png');">
        <h2>Bracelets</h2>
    </div>

    <div class="product-grid">
        <div class="card">
            <img src="assets/products/bracelt.jfif" alt="Product Name" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Product Name" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Product Name" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Product Name" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        
        <!-- Hidden extra products -->
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
    </div>

    <button class="expand-btn" onclick="toggleCategory(this)">
        <span class="expand-text">View More</span>
        <span class="expand-icon">â–¼</span>
    </button>
</section>

<!-- ===== RINGS ===== -->
<section class="category-section" id="rings">
    <div class="category-banner" style="background-image: url('assets/Background.png');">
        <h2>Rings</h2>
    </div>

    <div class="product-grid">
        <div class="card">
            <img src="assets/products/ivy-blink.jfif" alt="Ivy Blink" class="product-img">
            <h3>Ivy Blink</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/sadie-lou.jfif" alt="Sadie Lou" class="product-img">
            <h3>Sadie Lou</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/ring.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/ring1.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        
        <!-- Hidden extra products -->
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/ring2.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
    </div>

    <button class="expand-btn" onclick="toggleCategory(this)">
        <span class="expand-text">View More</span>
        <span class="expand-icon">â–¼</span>
    </button>
</section>

<!-- ===== ARM CUFFS ===== -->
<section class="category-section" id="armcuffs">
    <div class="category-banner" style="background-image: url('assets/Background.png');">
        <h2>Arm Cuffs</h2>
    </div>

    <div class="product-grid">
        <div class="card">
            <img src="assets/products/vera-lynn.jfif" alt="Vera Lynn" class="product-img">
            <h3>Vera Lynn</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        
        <!-- Hidden extra products -->
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
    </div>

    <button class="expand-btn" onclick="toggleCategory(this)">
        <span class="expand-text">View More</span>
        <span class="expand-icon">â–¼</span>
    </button>
</section>

<!-- ===== EAR ACCESSORIES ===== -->
<section class="category-section" id="ear-accessories">
    <div class="category-banner" style="background-image: url('assets/Background.png');">
        <h2>Ear Accessories</h2>
    </div>

    <div class="product-grid">
        <div class="card">
            <img src="assets/products/earcuff.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/earcuff2.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/grapes.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        
        <!-- Hidden extra products -->
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
    </div>

    <button class="expand-btn" onclick="toggleCategory(this)">
        <span class="expand-text">View More</span>
        <span class="expand-icon">â–¼</span>
    </button>
</section>

<!-- ===== PENDENTS ===== -->
<section class="category-section" id="pendents">
    <div class="category-banner" style="background-image: url('assets/Background.png');">
        <h2>Pendents</h2>
    </div>

    <div class="product-grid">
        <div class="card">
            <img src="assets/products/redeemer(black).jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/redeemer.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/ohm.jfif" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        
        <!-- Hidden extra products -->
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
        <div class="card extra-product" style="display: none;">
            <img src="assets/products/comingsoon.png" alt="Coming Soon" class="product-img">
            <h3>Coming Soon...</h3>
            <div class="price">â‚¹0</div>
            <button onclick="addToCart(this)">Add to Cart</button>
        </div>
    </div>

    <button class="expand-btn" onclick="toggleCategory(this)">
        <span class="expand-text">View More</span>
        <span class="expand-icon">â–¼</span>
    </button>
</section>

<!-- ===== CART SIDEBAR (REUSED) ===== -->
<div class="cart" id="cart">
    <div class="cart-header">
        <h3>Your Cart</h3>
        <button class="close-cart" onclick="toggleCart()">âœ•</button>
    </div>
    <div id="cartItems"></div>
    <div class="cart-total" id="cartTotal">Total: â‚¹0.00</div>
    <button id="placeOrderBtn" class="cart-place-order">Place Order</button>
</div>
<!-- ===== FOOTER (REUSED) ===== -->
<footer id="contact">
    <p><strong>Contact Us</strong></p>

    <p>
        Instagram:
        <a href="https://instagram.com/noor.ebhar" target="_blank">@noor.ebhar</a>
        &nbsp; | &nbsp;
        Email:
        <a href="mailto:noore.e.bhar@email.com">noore.e.bhar@email.com</a>
    </p>

    <p style="color: var(--gold);">[ Address goes here ]</p>

    <br>
    <p>We will wait for you Latika come back to shop again!</p>
    
    <br>
    <p>Â© 2026 NOORÃ‰ Jewellery | All Rights Reserved</p>

</footer>

<!-- Add to Cart sound -->
<audio id="addToCartSound">
    <source src="assets/click.mp3" type="audio/mpeg">
</audio>

<!-- Remove item sound -->
<audio id="removeItemSound" src="assets/trash.mp3" preload="auto">
</audio>
<script>
/* ================================
   CART PERSISTENCE (localStorage)
================================ */

const CART_STORAGE_KEY = 'noore_cart_items';

// Save cart to localStorage
function saveCartToStorage() {
    const cartItems = document.querySelectorAll(".cart-item");
    const items = Array.from(cartItems).map(item => ({
        name: item.querySelector(".cart-item-name").innerText,
        price: parseFloat(item.querySelector(".cart-item-price").innerText.replace("â‚¹", ""))
    }));
    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(items));
}

// Load cart from localStorage
function loadCartFromStorage() {
    const stored = localStorage.getItem(CART_STORAGE_KEY);
    if (!stored) return [];
    
    try {
        return JSON.parse(stored);
    } catch (e) {
        console.error("Error parsing cart from localStorage:", e);
        return [];
    }
}

// Render cart items from storage
function renderCartFromStorage() {
    const items = loadCartFromStorage();
    const cartItems = document.getElementById("cartItems");
    cartItems.innerHTML = "";
    
    items.forEach(item => {
        const itemDiv = document.createElement("div");
        itemDiv.classList.add("cart-item");
        
        const nameDiv = document.createElement("div");
        nameDiv.classList.add("cart-item-name");
        nameDiv.innerText = item.name;
        
        const priceDiv = document.createElement("div");
        priceDiv.classList.add("cart-item-price");
        priceDiv.innerText = `â‚¹${item.price}`;
        
        const removeBtn = document.createElement("button");
        removeBtn.classList.add("cart-item-remove");
        removeBtn.innerText = "âœ•";
        
        removeBtn.onclick = function (e) {
            e.stopPropagation();
            const removeSound = document.getElementById("removeItemSound");
            if (removeSound) {
                removeSound.volume = 0.10;
                removeSound.playbackRate = 1.2;
                removeSound.currentTime = 0;
                removeSound.play();
            }
            itemDiv.remove();
            updateCartTotal();
            saveCartToStorage();
        };
        
        itemDiv.appendChild(nameDiv);
        itemDiv.appendChild(priceDiv);
        itemDiv.appendChild(removeBtn);
        cartItems.appendChild(itemDiv);
    });
    
    updateCartTotal();
}
/* ================================
   SCROLL & CART FUNCTIONS
================================ */

function scrollToContact() {
    document.getElementById("contact").scrollIntoView({ behavior: "smooth" });
}

function toggleCart() {
    document.getElementById("cart").classList.toggle("active");
}

function addToCart(button) {
    const card = button.closest(".card");
    const productName = card.querySelector("h3").innerText;
    const productPriceText = card.querySelector(".price").innerText;
    const productPrice = parseFloat(productPriceText.replace("â‚¹", ""));

    const cartItems = document.getElementById("cartItems");

    const item = document.createElement("div");
    item.classList.add("cart-item");

    const nameDiv = document.createElement("div");
    nameDiv.classList.add("cart-item-name");
    nameDiv.innerText = productName;

    const priceDiv = document.createElement("div");
    priceDiv.classList.add("cart-item-price");
    priceDiv.innerText = `â‚¹${productPrice}`;

    const removeBtn = document.createElement("button");
    removeBtn.classList.add("cart-item-remove");
    removeBtn.innerText = "âœ•";

    removeBtn.onclick = function (e) {
        e.stopPropagation();
        const removeSound = document.getElementById("removeItemSound");
        if (removeSound) {
            removeSound.volume = 0.10;
            removeSound.playbackRate = 1.2;
            removeSound.currentTime = 0;
            removeSound.play();
        }
        item.remove();
        updateCartTotal();
        saveCartToStorage();
    };

    item.appendChild(nameDiv);
    item.appendChild(priceDiv);
    item.appendChild(removeBtn);
    cartItems.appendChild(item);

    const sound = document.getElementById("addToCartSound");
    if (sound) {
        sound.currentTime = 0;
        sound.volume = 0.20;
        sound.playbackRate = 1.5;
        sound.play();
    }

    button.classList.remove("pop");
    void button.offsetWidth;
    button.classList.add("pop");

    toggleCart();
    updateCartTotal();
    saveCartToStorage();
}

function updateCartTotal() {
    let total = 0;
    document.querySelectorAll(".cart-item-price").forEach(price => {
        total += parseFloat(price.innerText.replace("â‚¹", ""));
    });
    document.getElementById("cartTotal").innerText = `Total: â‚¹${total}`;
}

/* Prevent inside clicks from closing cart */
document.getElementById("cart").addEventListener("click", function (event) {
    event.stopPropagation();
});

/* Outside click closes cart */
document.addEventListener("click", function (event) {
    const cart = document.getElementById("cart");
    const cartButton = event.target.closest('[onclick="toggleCart()"]');

    if (
        cart.classList.contains("active") &&
        !cart.contains(event.target) &&
        !cartButton
    ) {
        cart.classList.remove("active");
    }
});
/* ================================
   DRAG TO CLOSE CART
================================ */

const cart = document.getElementById("cart");
let isDragging = false;
let startX = 0;

cart.addEventListener("mousedown", startDrag);
cart.addEventListener("touchstart", startDrag, { passive: true });

function startDrag(e) {
    if (!cart.classList.contains("active")) return;
    isDragging = true;
    startX = e.touches ? e.touches[0].clientX : e.clientX;
    cart.style.transition = "none";
}

document.addEventListener("mousemove", dragMove);
document.addEventListener("touchmove", dragMove, { passive: true });

function dragMove(e) {
    if (!isDragging) return;
    const currentX = e.touches ? e.touches[0].clientX : e.clientX;
    const delta = currentX - startX;
    if (delta > 0) {
        cart.style.right = `-${delta}px`;
    }
}

document.addEventListener("mouseup", endDrag);
document.addEventListener("touchend", endDrag);

function endDrag() {
    if (!isDragging) return;
    isDragging = false;
    cart.style.transition = "right 0.4s ease";
    const draggedAmount = Math.abs(parseInt(cart.style.right) || 0);
    if (draggedAmount > 120) {
        cart.classList.remove("active");
    }
    cart.style.right = "";
}
/* ================================
   LOGIN & PLACE ORDER BUTTONS
================================ */

const loginBtn = document.getElementById("loginBtn");
const placeOrderBtn = document.getElementById("placeOrderBtn");

/* Update login button based on localStorage */
function updateLoginButton() {
    const storedUser = localStorage.getItem('noore_user');
    if (storedUser) {
        const user = JSON.parse(storedUser);
        // Get first name (everything before first space)
        const firstName = user.name.split(' ')[0];
        loginBtn.textContent = firstName;
        loginBtn.classList.add("logged-in");
    } else {
        loginBtn.textContent = "Login";
        loginBtn.classList.remove("logged-in");
    }
}

// Login Modal Functions
function openLoginModal() {
    document.getElementById('loginModal').style.display = 'flex';
}

function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
    document.getElementById('userName').value = '';
    document.getElementById('userEmail').value = '';
    document.getElementById('userPhone').value = '';
}

function saveUserDetails() {
    const name = document.getElementById('userName').value.trim();
    const email = document.getElementById('userEmail').value.trim();
    const phone = document.getElementById('userPhone').value.trim();
    
    if (!name || !email || !phone) {
        showToast('Please fill in all fields');
        return;
    }
    
    // Save full name to localStorage
    localStorage.setItem('noore_user', JSON.stringify({ name, email, phone }));
    
    // Get first name (everything before first space)
    const firstName = name.split(' ')[0];
    
    // Update button with first name only
    loginBtn.textContent = firstName;
    loginBtn.classList.add('logged-in');
    
    closeLoginModal();
    showToast('Welcome, ' + firstName + '!');
}

// Handle login button click
function handleLoginClick() {
    if (loginBtn.classList.contains("logged-in")) {
        showLogoutModal();
    } else {
        openLoginModal();
    }
}

// Logout Confirmation Modal
function showLogoutModal() {
    document.getElementById('logoutModal').style.display = 'flex';
}

function closeLogoutModal() {
    document.getElementById('logoutModal').style.display = 'none';
}

function confirmLogout() {
    localStorage.removeItem('noore_user');
    loginBtn.textContent = "Login";
    loginBtn.classList.remove("logged-in");
    closeLogoutModal();
    showToast('Logged out successfully!');
}

// Toast Notification
function showToast(message) {
    const toast = document.getElementById('toast');
    toast.innerText = message;
    toast.style.display = 'block';
    
    setTimeout(() => {
        toast.style.display = 'none';
    }, 3000);
}

// Handle Enter key navigation in login modal
document.addEventListener('keydown', function(e) {
    // Only if login modal is open
    if (document.getElementById('loginModal').style.display === 'flex') {
        if (e.key === 'Enter') {
            e.preventDefault();
            
            const nameInput = document.getElementById('userName');
            const emailInput = document.getElementById('userEmail');
            const phoneInput = document.getElementById('userPhone');
            const continueBtn = document.querySelector('#loginModal button[onclick="saveUserDetails()"]');
            
            // If on name field, go to email
            if (document.activeElement === nameInput) {
                emailInput.focus();
            }
            // If on email field, go to phone
            else if (document.activeElement === emailInput) {
                phoneInput.focus();
            }
            // If on phone field or button, click continue
            else if (document.activeElement === phoneInput || document.activeElement === continueBtn) {
                saveUserDetails();
            }
        }
    }
});

// Check login status on page load
document.addEventListener("DOMContentLoaded", () => {
    renderCartFromStorage();
    updateLoginButton();
});

// Place Order button click
placeOrderBtn.addEventListener("click", async () => {
    const cartItemsElements = document.querySelectorAll(".cart-item");

    if (cartItemsElements.length === 0) {
        showToast("ðŸ›’ Your cart is empty!");
        return;
    }

    // Get user from localStorage
    const storedUser = localStorage.getItem('noore_user');
    if (!storedUser) {
        showToast('âš ï¸ Please login first!');
        openLoginModal();
        return;
    }

    const user = JSON.parse(storedUser);

    const cartItems = Array.from(cartItemsElements).map(item => ({
        name: item.querySelector(".cart-item-name").innerText,
        price: parseFloat(item.querySelector(".cart-item-price").innerText.replace("â‚¹", ""))
    }));

    const products = cartItems.map(item => `${item.name} - â‚¹${item.price}`).join(', ');
    const total = cartItems.reduce((sum, item) => sum + item.price, 0);

    // Show UPI payment modal
    showUPIPaymentModal(user.name, user.email, products, total);
});
// UPI Payment Modal Function
function showUPIPaymentModal(customer, email, products, total) {
    let modal = document.getElementById('upiPaymentModal');
    if (!modal) {
        modal = document.createElement('div');
        modal.id = 'upiPaymentModal';
        modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        `;
        document.body.appendChild(modal);
    }

    const upiID = 'amitapoojary12345-1@oksbi';
    const upiLink = `upi://pay?pa=${upiID}&pn=NOORÃ‰&am=${total}&cu=INR`;
    const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(upiLink)}`;

    modal.innerHTML = `
        <div style="background: white; padding: 30px; border-radius: 15px; text-align: center; max-width: 350px; width: 90%;">
            <h3 style="color: var(--maroon); margin-bottom: 15px;">Pay via UPI</h3>
            <p style="font-size: 24px; font-weight: bold; color: var(--maroon); margin-bottom: 20px;">â‚¹${total}</p>
            <img src="${qrCodeUrl}" alt="UPI QR Code" style="width: 200px; height: 200px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 10px;">
            <p style="font-size: 12px; color: #666; margin-bottom: 20px;">Scan with any UPI app (Google Pay, PhonePe, Paytm)</p>
            <p style="font-size: 11px; color: #999; margin-bottom: 20px;">UPI ID: ${upiID}</p>
            <button onclick="confirmUPIPayment('${customer}', '${email}', '${products}', ${total})" style="width: 100%; padding: 12px; background: var(--maroon); color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin-bottom: 10px;">I've Paid</button>
            <button onclick="closeUPIModal()" style="width: 100%; padding: 10px; background: #ddd; color: #333; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">Cancel</button>
        </div>
    `;

    modal.style.display = 'flex';
}
// Close UPI Modal
function closeUPIModal() {
    const modal = document.getElementById('upiPaymentModal');
    if (modal) {
        modal.style.display = 'none';
    }
}

// Confirm Payment and Submit Order
function confirmUPIPayment(customer, email, products, total) {
    const orderId = 'NOOR-' + Date.now().toString().slice(-6);
    
    let phone = '';
    const storedUser = localStorage.getItem('noore_user');
    if (storedUser) {
        phone = JSON.parse(storedUser).phone || '';
    }
    
    fetch(
        "https://script.google.com/macros/s/AKfycbwOj4kVPk6oQ2T8aQ0FPqrPFIzHCohKxRQyJgzEBsChCQxGB56HxAn3aI7X0yZFbaUA/exec",
        {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                customer: customer,
                email: email || '',
                phone: phone,
                products: products,
                total: total
            })
        }
    ).then(() => {
        closeUPIModal();
        showOrderConfirmationPopup(orderId, total);
    }).catch((err) => {
        console.error(err);
        showToast("Order failed: " + err.message);
    });
}
// Show Order Confirmation Popup
function showOrderConfirmationPopup(orderId, total) {
    let modal = document.getElementById('orderConfirmationModal');
    if (!modal) {
        modal = document.createElement('div');
        modal.id = 'orderConfirmationModal';
        modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 10000;';
        document.body.appendChild(modal);
    }

    modal.innerHTML = `
        <div style="background: white; padding: 40px 30px; border-radius: 20px; text-align: center; max-width: 400px; width: 90%;">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #d4af37, #f0d878); border-radius: 50%; margin: 0 auto 20px; display: flex; justify-content: center; align-items: center; font-size: 40px; color: white;">âœ“</div>
            <h3 style="color: var(--maroon); font-family: 'Playfair Display', serif; font-size: 28px; margin-bottom: 10px;">Order Placed!</h3>
            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Thank you for your order</p>
            <div style="background: #f8f5f2; padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                <p style="font-size: 13px; color: #999; margin-bottom: 5px;">Order ID</p>
                <p style="font-size: 18px; font-weight: 600; color: var(--maroon); margin-bottom: 15px;">${orderId}</p>
                <p style="font-size: 13px; color: #999; margin-bottom: 5px;">Total Amount</p>
                <p style="font-size: 24px; font-weight: 700; color: var(--maroon);">â‚¹${total}</p>
            </div>
            <div style="text-align: left; background: #fff9e6; padding: 15px; border-radius: 10px; margin-bottom: 25px; border-left: 4px solid var(--gold);">
                <p style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 500;">Next Steps:</p>
                <p style="font-size: 12px; color: #888; margin-bottom: 5px;">1. Send payment screenshot</p>
                <p style="font-size: 12px; color: #888; margin-bottom: 5px;">2. We'll confirm within 24 hours</p>
                <p style="font-size: 12px; color: #888;">3. Shipping details will be shared</p>
            </div>
            <p style="font-size: 12px; color: #999; margin-bottom: 25px;">Questions? DM us @noor.ebhar</p>
            <button onclick="closeOrderConfirmationModal()" style="width: 100%; padding: 14px; background: var(--maroon); color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer;">Done</button>
        </div>
    `;

    modal.style.display = 'flex';
}

// Close Order Confirmation Modal
function closeOrderConfirmationModal() {
    const modal = document.getElementById('orderConfirmationModal');
    if (modal) {
        modal.style.display = 'none';
    }
    document.getElementById("cartItems").innerHTML = "";
    updateCartTotal();
    localStorage.removeItem(CART_STORAGE_KEY);
}

// Toggle Category Expand
function toggleCategory(button) {
    const productGrid = button.previousElementSibling;
    const extraProducts = productGrid.querySelectorAll('.extra-product');
    const isExpanded = button.classList.contains('expanded');
    
    if (isExpanded) {
        // Collapse
        extraProducts.forEach(product => {
            product.style.display = 'none';
        });
        button.classList.remove('expanded');
        button.querySelector('.expand-text').textContent = 'View More';
    } else {
        // Expand
        extraProducts.forEach(product => {
            product.style.display = 'block';
        });
        button.classList.add('expanded');
        button.querySelector('.expand-text').textContent = 'View Less';
    }
}

// Toggle Browse Menu (Click - works on both desktop and mobile)
function toggleBrowseMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const menu = document.getElementById('browseMenu');
    menu.classList.toggle('show');
}

// Close Browse Menu
function closeBrowseMenu() {
    const menu = document.getElementById('browseMenu');
    menu.classList.remove('show');
}

// Close menu when clicking outside
document.addEventListener('click', function(e) {
    const menu = document.getElementById('browseMenu');
    const wrapper = document.querySelector('.browse-wrapper');
    
    if (menu && wrapper && !wrapper.contains(e.target)) {
        menu.classList.remove('show');
    }
});

// Close menu on window resize
window.addEventListener('resize', function() {
    const menu = document.getElementById('browseMenu');
    menu.classList.remove('show');
});

</script>

</body>
</html>